# Research & Decisions for Book Architecture

**Branch**: `001-ros2-humanoid-basics` | **Date**: 2025-12-07

This document outlines the key architectural and formatting decisions for the Docusaurus book, as requested in the `/sp.plan` command.

## 1. Docusaurus Book Architecture

- **Decision**: A single Docusaurus instance will be used for the entire book, located in the `/book` directory at the repository root.
- **Rationale**: The book is a single, cohesive project. A single instance simplifies configuration, dependency management, and deployment. Housing it in `/book` keeps it cleanly separated from the project's meta-files (specs, history, etc.).
- **Alternatives considered**:
    - **Multi-instance**: Using separate Docusaurus instances for different major sections of the book. Rejected as overly complex for the current scope.
    - **Docs at root**: Placing the Docusaurus `docs` directory at the project root. Rejected to avoid cluttering the root with website-specific configuration.

## 2. Code and Diagram Formatting

- **Decision**:
    - **Code**: Runnable code examples will be maintained as a proper ROS 2 Python package within `book/src/examples`. Snippets from these files will be imported into MDX files using Docusaurus's code block features, including line highlighting. This ensures the documentation always reflects the runnable code.
    - **Diagrams**: Diagrams will be created as SVG or PNG files and stored in `book/static/img`. They will be embedded in Markdown using standard image tags. Diagrams will have a consistent, clean style.
- **Rationale**: This approach enforces a single source of truth for code, preventing drift between examples and documentation. Storing diagrams in `static/img` is standard Docusaurus practice.

## 3. Sidebar and Navigation Layout

- **Decision**: The sidebar will be configured in `docusaurus.config.js` to automatically generate navigation from the file structure within the `docs` directory. Directories will represent modules, and files within them will represent chapters, ordered alphanumerically.
- **Rationale**: Autogenerated sidebars are easy to maintain. As new chapters or modules are added, the navigation updates automatically without manual configuration, reducing overhead. The naming convention (`01-`, `02-`) provides explicit control over ordering.

## 4. Versioning and Update Strategy

- **Decision**: Initially, the book will not use Docusaurus's built-in versioning feature. All content will be developed on the `main` branch (or feature branches merged to it) and represent the "current" version of the book. Versioning can be introduced later if the book needs to be frozen for a specific course while new content is developed.
- **Rationale**: Versioning adds complexity to the build and navigation. For the initial creation of the book, it is unnecessary. Sticking to a single "latest" version is simpler for both developers and readers.
