<svg width="900" height="600" xmlns="http://www.w3.org/2000/svg">
  <style>
    .node { fill: #e3f2fd; stroke: #1565c0; stroke-width: 2px; rx: 10px; ry: 10px; }
    .llm { fill: #fff3e0; stroke: #f57c00; stroke-width: 2px; rx: 10px; ry: 10px; }
    .process { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2px; rx: 10px; ry: 10px; }
    .output { fill: #e8f5e9; stroke: #2e7d32; stroke-width: 2px; rx: 10px; ry: 10px; }
    .text { font-family: Arial, sans-serif; font-size: 14px; fill: #000; text-anchor: middle; }
    .arrow { stroke: #444; stroke-width: 2px; marker-end: url(#arrowhead); }
    .title { font-size: 18px; font-weight: bold; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
      refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#444" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" class="text title">LLM-Based Task Decomposition Flow</text>

  <!-- Input Layer -->
  <rect x="50" y="80" width="180" height="60" class="node"/>
  <text x="140" y="110" class="text">High-Level Task</text>
  <text x="140" y="130" class="text">Command (e.g., "Clean the room")</text>

  <!-- Environment State -->
  <rect x="50" y="170" width="180" height="60" class="node"/>
  <text x="140" y="200" class="text">Environment State</text>
  <text x="140" y="220" class="text">(Objects, Locations, Constraints)</text>

  <!-- LLM Processing -->
  <rect x="300" y="120" width="180" height="80" class="llm"/>
  <text x="390" y="150" class="text">Large Language</text>
  <text x="390" y="170" class="text">Model (LLM)</text>
  <text x="390" y="190" class="text">(GPT, Claude, etc.)</text>

  <!-- Cognitive Planning -->
  <rect x="550" y="120" width="180" height="80" class="process"/>
  <text x="640" y="150" class="text">Cognitive</text>
  <text x="640" y="170" class="text">Planning</text>
  <text x="640" y="190" class="text">(Reasoning & Decomposition)</text>

  <!-- Task Breakdown -->
  <rect x="750" y="120" width="180" height="80" class="output"/>
  <text x="840" y="150" class="text">Task</text>
  <text x="840" y="170" class="text">Breakdown</text>
  <text x="840" y="190" class="text">(Action Sequence)</text>

  <!-- Action Details -->
  <rect x="600" y="250" width="180" height="100" class="output"/>
  <text x="690" y="280" class="text">Action Details</text>
  <text x="690" y="300" class="text">- Parameters</text>
  <text x="690" y="320" class="text">- Preconditions</text>
  <text x="690" y="340" class="text">- Effects</text>

  <!-- Execution Plan -->
  <rect x="600" y="400" width="180" height="80" class="output"/>
  <text x="690" y="430" class="text">Execution Plan</text>
  <text x="690" y="450" class="text">(Ordered Actions)</text>
  <text x="690" y="470" class="text">with Dependencies</text>

  <!-- Arrows -->
  <line x1="230" y1="110" x2="300" y2="160" class="arrow"/>
  <line x1="230" y1="200" x2="300" y2="160" class="arrow"/>

  <line x1="480" y1="160" x2="550" y2="160" class="arrow"/>

  <line x1="730" y1="160" x2="750" y2="160" class="arrow"/>

  <line x1="640" y1="200" x2="690" y2="250" class="arrow"/>

  <line x1="690" y1="350" x2="690" y2="400" class="arrow"/>

  <!-- Feedback Loop -->
  <rect x="350" y="350" width="180" height="60" class="process"/>
  <text x="440" y="380" class="text">Refinement</text>
  <text x="440" y="400" class="text">(Based on Feedback)</text>

  <line x1="690" y1="480" x2="440" y2="400" class="arrow"/>
  <line x1="440" y1="350" x2="390" y2="200" class="arrow"/>

  <!-- Labels -->
  <text x="140" y="60" class="text" font-weight="bold">Input</text>
  <text x="390" y="100" class="text" font-weight="bold">LLM Processing</text>
  <text x="640" y="100" class="text" font-weight="bold">Cognitive Planning</text>
  <text x="840" y="100" class="text" font-weight="bold">Output</text>
  <text x="690" y="230" class="text" font-weight="bold">Action Details</text>
  <text x="690" y="380" class="text" font-weight="bold">Execution</text>
  <text x="440" y="330" class="text" font-weight="bold">Feedback Loop</text>

  <!-- Legend -->
  <rect x="700" y="500" width="180" height="90" fill="none" stroke="#ccc"/>
  <text x="790" y="520" class="text" font-weight="bold">Legend</text>
  <rect x="710" y="535" width="20" height="15" class="node"/>
  <text x="740" y="547" class="text" text-anchor="start">Input</text>
  <rect x="710" y="555" width="20" height="15" class="llm"/>
  <text x="740" y="567" class="text" text-anchor="start">LLM</text>
  <rect x="710" y="575" width="20" height="15" class="process"/>
  <text x="740" y="587" class="text" text-anchor="start">Process</text>
  <rect x="710" y="595" width="20" height="15" class="output"/>
  <text x="740" y="607" class="text" text-anchor="start">Output</text>
</svg>