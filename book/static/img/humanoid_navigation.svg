<svg width="900" height="700" xmlns="http://www.w3.org/2000/svg">
  <style>
    .node { fill: #e8f5e9; stroke: #2e7d32; stroke-width: 2px; rx: 10px; ry: 10px; }
    .process { fill: #e3f2fd; stroke: #1565c0; stroke-width: 2px; rx: 10px; ry: 10px; }
    .constraint { fill: #fff3e0; stroke: #f57c00; stroke-width: 2px; rx: 10px; ry: 10px; }
    .output { fill: #fce4ec; stroke: #c2185b; stroke-width: 2px; rx: 10px; ry: 10px; }
    .text { font-family: Arial, sans-serif; font-size: 12px; fill: #000; text-anchor: middle; }
    .arrow { stroke: #444; stroke-width: 2px; marker-end: url(#arrowhead); }
    .title { font-size: 16px; font-weight: bold; }
    .humanoid { fill: #bbdefb; stroke: #1976d2; stroke-width: 2px; }
  </style>

  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7"
      refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#444" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="450" y="30" class="text title">Humanoid Navigation with Nav2</text>

  <!-- Input Sources -->
  <rect x="50" y="80" width="120" height="60" class="node"/>
  <text x="110" y="110" class="text">Maps from</text>
  <text x="110" y="125" class="text">Isaac ROS</text>

  <rect x="50" y="160" width="120" height="60" class="node"/>
  <text x="110" y="190" class="text">Sensor</text>
  <text x="110" y="205" class="text">Data</text>

  <rect x="50" y="240" width="120" height="60" class="node"/>
  <text x="110" y="270" class="text">Robot</text>
  <text x="110" y="285" class="text">Model</text>

  <!-- Nav2 Core Components -->
  <rect x="250" y="80" width="150" height="60" class="process"/>
  <text x="325" y="110" class="text">Global Path</text>
  <text x="325" y="125" class="text">Planning</text>

  <rect x="250" y="160" width="150" height="60" class="process"/>
  <text x="325" y="190" class="text">Footstep</text>
  <text x="325" y="205" class="text">Planning</text>

  <rect x="250" y="240" width="150" height="60" class="process"/>
  <text x="325" y="270" class="text">Balance</text>
  <text x="325" y="285" class="text">Control</text>

  <rect x="250" y="320" width="150" height="60" class="process"/>
  <text x="325" y="350" class="text">Local Path</text>
  <text x="325" y="365" class="text">Planning</text>

  <!-- Humanoid Constraints -->
  <rect x="480" y="160" width="180" height="100" class="constraint"/>
  <text x="570" y="180" class="text">Humanoid</text>
  <text x="570" y="195" class="text">Kinematic</text>
  <text x="570" y="210" class="text">Constraints</text>
  <text x="570" y="225" class="text">- Joint limits</text>
  <text x="570" y="240" class="text">- Balance</text>
  <text x="570" y="255" class="text">- Step size</text>

  <!-- Outputs -->
  <rect x="720" y="100" width="140" height="60" class="output"/>
  <text x="790" y="130" class="text">Navigation</text>
  <text x="790" y="145" class="text">Commands</text>

  <rect x="720" y="180" width="140" height="60" class="output"/>
  <text x="790" y="210" class="text">Footstep</text>
  <text x="790" y="225" class="text">Sequence</text>

  <rect x="720" y="260" width="140" height="60" class="output"/>
  <text x="790" y="290" class="text">Balance</text>
  <text x="790" y="305" class="text">Trajectory</text>

  <!-- Humanoid Robot Visualization -->
  <g transform="translate(750, 400)">
    <!-- Body -->
    <rect x="-15" y="-40" width="30" height="40" class="humanoid"/>
    <!-- Head -->
    <circle cx="0" cy="-50" r="15" class="humanoid"/>
    <!-- Left Arm -->
    <line x1="15" y1="-35" x2="35" y2="-20" stroke="#1976d2" stroke-width="6"/>
    <!-- Right Arm -->
    <line x1="-15" y1="-35" x2="-35" y2="-20" stroke="#1976d2" stroke-width="6"/>
    <!-- Left Leg -->
    <line x1="8" y1="0" x2="15" y2="30" stroke="#1976d2" stroke-width="6"/>
    <!-- Right Leg -->
    <line x1="-8" y1="0" x2="-15" y2="30" stroke="#1976d2" stroke-width="6"/>
    <!-- Left Foot -->
    <rect x="10" y="30" width="10" height="5" fill="#5c6bc0"/>
    <!-- Right Foot -->
    <rect x="-20" y="30" width="10" height="5" fill="#5c6bc0"/>
    <text x="0" y="50" class="text" font-size="10">Humanoid Robot</text>
  </g>

  <!-- Arrows -->
  <line x1="170" y1="110" x2="250" y2="110" class="arrow"/>
  <line x1="170" y1="190" x2="250" y2="190" class="arrow"/>
  <line x1="170" y1="270" x2="250" y2="270" class="arrow"/>

  <line x1="400" y1="110" x2="480" y2="160" class="arrow"/>
  <line x1="400" y1="190" x2="480" y2="200" class="arrow"/>
  <line x1="400" y1="270" x2="480" y2="240" class="arrow"/>
  <line x1="400" y1="350" x2="480" y2="260" class="arrow"/>

  <line x1="660" y1="180" x2="720" y2="130" class="arrow"/>
  <line x1="660" y1="200" x2="720" y2="210" class="arrow"/>
  <line x1="660" y1="240" x2="720" y2="290" class="arrow"/>

  <!-- Balance feedback loop -->
  <path d="M 325 300 C 325 370, 650 370, 650 250" class="arrow" fill="none"/>

  <!-- Legend -->
  <rect x="700" y="500" width="200" height="140" fill="none" stroke="#ccc"/>
  <text x="800" y="520" class="text" font-weight="bold">Legend</text>
  <rect x="710" y="535" width="20" height="15" class="node"/>
  <text x="740" y="547" class="text" text-anchor="start">Input</text>
  <rect x="710" y="555" width="20" height="15" class="process"/>
  <text x="740" y="567" class="text" text-anchor="start">Process</text>
  <rect x="710" y="575" width="20" height="15" class="constraint"/>
  <text x="740" y="587" class="text" text-anchor="start">Constraint</text>
  <rect x="710" y="595" width="20" height="15" class="output"/>
  <text x="740" y="607" class="text" text-anchor="start">Output</text>
  <rect x="710" y="615" width="20" height="15" class="humanoid"/>
  <text x="740" y="627" class="text" text-anchor="start">Humanoid</text>

  <!-- Labels -->
  <text x="110" y="60" class="text" font-weight="bold">Input Sources</text>
  <text x="325" y="60" class="text" font-weight="bold">Nav2 Components</text>
  <text x="570" y="60" class="text" font-weight="bold">Humanoid Constraints</text>
  <text x="790" y="60" class="text" font-weight="bold">Outputs</text>
</svg>